{% comment %}
Reading Time Calculator
Calculates estimated reading time based on average reading speed of 200 words per minute
Displays with clean styling and appropriate icons
{% endcomment %}

{%- comment -%}
Determine source text for reading-time calculation:
- Prefer explicit `content` parameter (rendered HTML from layouts)
- If not provided, and a `post` object is passed, try to resolve the full post content
- Fallback to `content` variable if present in scope
{%- endcomment -%}

{%- if include.content -%}
  {%- assign source_html = include.content -%}
{%- elsif include.post -%}
  {%- assign passed_post = include.post -%}
  {%- comment -%}
  Try to locate the original post in site.posts by matching the url or path so we can use its full content.
  {%- endcomment -%}
  {%- assign source_html = passed_post.content -%}
{%- else -%}
  {%- assign source_html = content -%}
{%- endif -%}

{%- assign words = source_html | strip_html | number_of_words -%}
{%- assign reading_time = words | divided_by: 200.0 -%}
{%- assign reading_minutes = reading_time | ceil -%}

<div class="reading-time" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #6b7280; font-size: 0.875rem; margin-bottom: 1rem;">
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.7;">
    <circle cx="12" cy="12" r="10"></circle>
    <polyline points="12,6 12,12 16,14"></polyline>
  </svg>
  
  {% if reading_minutes == 1 %}
    <span>{{ reading_minutes }} min read</span>
  {% elsif reading_minutes < 1 %}
    <span>< 1 min read</span>
  {% else %}
    <span>{{ reading_minutes }} min read</span>
  {% endif %}
  
  <span style="opacity: 0.6;">â€¢</span>
  <span style="opacity: 0.8;">{{ words }} words</span>
</div>

{% comment %}
Dark mode styles - automatically handled by CSS custom properties
{% endcomment %}
<style>
.reading-time {
  color: var(--text-muted, #6b7280);
  transition: color 0.2s ease;
}

[data-theme="dark"] .reading-time {
  color: var(--text-muted-dark, #9ca3af);
}

.reading-time svg {
  flex-shrink: 0;
}

@media (max-width: 768px) {
  .reading-time {
    font-size: 0.8rem;
  }
}
</style>